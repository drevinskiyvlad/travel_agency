# ЗАВДАННЯ

Турфірма має каталог турів. Для каталогу реалізувати можливість

Вибір турів:
- за типом (відпочинок, екскурсія, шопінг);
- за ціною;
- за кількістю осіб;
- за типом готелю.


  Користувач реєструється в системі, обирає Тур і оформляє Замовлення. Після замовлення
  тур має статус зареєстрованого.

  Незареєстрований користувач не має можливості забронювати тур.

  Користувач має особистий кабінет, в якому міститься коротка інформація про нього, а також
  список обраних турів та їх поточний статус (зареєстровані, оплачені, скасовані).

  Менеджер визначає тур як гарячий. Гарячі тури завжди показуються вгорі списку.

  Менеджер переводить статус туру з зареєстрованого в оплачений або скасований.
  Для кожного замовленого туру визначається знижка з кроком, встановленим менеджером, але не більше як
  відсоток, який також визначається керівником.

  Системний адміністратор має такі ж права, як і менеджер, і може додатково:
- додати / видалити тур, змінити інформацію про тур;
- заблокувати / розблокувати користувача.

## БД

- Модель БД:

![img.png](img.png)

- Щоб створити схему, ви можете використовувати сценарій у sql/db.sql
- Щоб ініціалізувати змінні та заповнити таблицю, ви можете використовувати сценарій у sql/init_variables.sql

## Інструкції щодо встановлення та запуску на локальному сервері (Tomcat)

- Встановіть JDK принаймні версії 8. Встановіть змінні середовища для Java.
- Встановіть Maven принаймні версії 3. Встановіть змінні середовища для Maven.
- Встановіть MySQL принаймні версії 8 і створіть користувача «root» з паролем: 'root'.
- Встановіть Tomcat принаймні версії 9. Відкрийте файл tomcat-users.xml у папці conf (/Tomcat 9.0/conf/tomcat-users.xml). У файлі tomcat-users.xml після тегу <tomcat-users ...> вставте тег: < user username = "user" password = "pass" roles = "manager-gui, manager-script" /> або замініть на зазначений тег, якщо <користувач ...> вже існує, збережіть зміни.
- Завантажте mysql-connector-j-8.0.32.jar (https://mvnrepository.com/artifact/com.mysql/mysql-connector-j) і помістіть його в папку lib (/Tomcat/lib).
- Запустіть Tomcat (у папці bin (/Tomcat 9.0/bin/startup.bat) запустіть файл startup.bat або в службі запуску Tomcat Monitor (Start Service)).
- Завантажте проєкт (клонувати через git (https://gitlab.com/drevinskiy.vlad/travel_agency) або завантажити проєкт і розпакувати).
- Відкрийте командний рядок (консоль) із папки проекту (travel_agency) або перейдіть у командному рядку до папки проєкт (travel_agency), де міститься pom.xml.
- Виконайте в командному рядку команду: mvn tomcat7:deploy
- Після завершення розгортання перейдіть у своєму браузері на сторінку http://localhost:8080/travel_agency.
- Зареєструвати нового користувача
- Якщо ви хочете змінити роль користувача, але у вас немає користувачів із правилами адміністратора, тоді введіть у консоль бази даних 'UPDATE user SET user_role_id =? WHERE email = ?;'. Але замість «?» поставити свої значення
- Щоб вимкнути систему та сервер Tomcat, запустіть файл shutdown.bat у папці bin (/Tomcat 9.0/bin/shutdown.bat) або зупиніть службу в Monitor Tomcat (Stop Service).